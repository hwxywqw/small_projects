#include <stdio.h>
#include <stdlib.h>
#pragma GCC optimize("O3")
#define MOD 0x0101010101010101

static const int
Ksub1[56] ={57, 49, 41, 33, 25, 17,  9,  1, 58, 50, 42, 34, 26, 18,
			10,  2, 59, 51, 43, 35, 27, 19, 11,  3, 60, 52, 44, 36,
			63, 55, 47, 39, 31, 23, 15,  7, 62, 54, 46, 38, 30, 22,
			14,  6, 61, 53, 45, 37, 29, 21, 13,  5, 28, 20, 12,  4},
Ksub2[48] ={14, 17, 11, 24,  1,  5,  3, 28, 15,  6, 21, 10,
			23, 19, 12,  4, 26,  8, 16,  7, 27, 20, 13,  2,
			41, 52, 31, 37, 47, 55, 30, 40, 51, 45, 33, 48,
			44, 49, 39, 56, 34, 53, 46, 42, 50, 36, 29, 32},
Kleft[16] = {1, 1, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 1};

static const unsigned long long 
Sbox[8][64] ={
0x00808200, 0x00008000, 0x00808002, 0x00000002, 0x00000200, 0x00808202, 0x00800202, 0x00800000,
0x00000202, 0x00800200, 0x00008200, 0x00808000, 0x00008002, 0x00800002, 0x00000000, 0x00008202,
0x00000000, 0x00808202, 0x00008202, 0x00008000, 0x00808200, 0x00000200, 0x00808002, 0x00000002,
0x00800200, 0x00008200, 0x00808000, 0x00800202, 0x00800002, 0x00008002, 0x00000202, 0x00800000,
0x00008000, 0x00000002, 0x00808200, 0x00800000, 0x00808002, 0x00008200, 0x00000200, 0x00800202,
0x00808202, 0x00808000, 0x00800002, 0x00008202, 0x00000202, 0x00800200, 0x00008002, 0x00000000,
0x00808202, 0x00808000, 0x00800000, 0x00000200, 0x00008000, 0x00800002, 0x00000002, 0x00008202,
0x00008002, 0x00800202, 0x00000202, 0x00808200, 0x00800200, 0x00000000, 0x00008200, 0x00808002,
0x40084010, 0x00004000, 0x00080000, 0x40080010, 0x40000010, 0x40084000, 0x40004000, 0x00000010,
0x00084000, 0x40004010, 0x40000000, 0x00084010, 0x00080010, 0x00000000, 0x00004010, 0x40080000,
0x40004000, 0x00084010, 0x00000010, 0x40004010, 0x40084010, 0x40000000, 0x00080000, 0x40080010,
0x00080010, 0x00000000, 0x00004000, 0x40080000, 0x40000010, 0x00084000, 0x40084000, 0x00004010,
0x00000000, 0x40080010, 0x40004010, 0x40084000, 0x40080000, 0x00000010, 0x00084010, 0x00004000,
0x00004010, 0x00080000, 0x00080010, 0x40000010, 0x00084000, 0x40004000, 0x40000000, 0x40084010,
0x00084010, 0x00080000, 0x40080000, 0x00004000, 0x40004000, 0x40084010, 0x00000010, 0x40000000,
0x40084000, 0x40000010, 0x40004010, 0x00080010, 0x00000000, 0x00004010, 0x40080010, 0x00084000,
0x00000104, 0x00000000, 0x04000100, 0x00010104, 0x00010004, 0x04000004, 0x04010104, 0x04010000,
0x04000000, 0x04010100, 0x00010100, 0x04010004, 0x04000104, 0x00010000, 0x00000004, 0x00000100,
0x04010100, 0x04010004, 0x00000000, 0x04000100, 0x04000004, 0x00010000, 0x00010004, 0x00000104,
0x00000004, 0x00000100, 0x04010000, 0x00010104, 0x00010100, 0x04000104, 0x04010104, 0x04000000,
0x04010100, 0x00010004, 0x00010000, 0x04000100, 0x00000100, 0x04010104, 0x04000004, 0x00000000,
0x04000104, 0x04000000, 0x00000004, 0x00010100, 0x04010000, 0x00000104, 0x00010104, 0x04010004,
0x04000000, 0x00000104, 0x04010100, 0x00000000, 0x00010004, 0x04000100, 0x00000100, 0x04010004,
0x00010000, 0x04010104, 0x00010104, 0x04000004, 0x04000104, 0x04010000, 0x00000004, 0x00010100,
0x80401000, 0x80001040, 0x00401040, 0x80400000, 0x00000000, 0x00401000, 0x80000040, 0x00400040,
0x80000000, 0x00400000, 0x00000040, 0x80001000, 0x80400040, 0x00001040, 0x00001000, 0x80401040,
0x80001040, 0x00000040, 0x80400040, 0x80001000, 0x00401000, 0x80401040, 0x00000000, 0x80400000,
0x00001000, 0x80401000, 0x00400000, 0x00001040, 0x80000000, 0x00400040, 0x00401040, 0x80000040, 
0x00400040, 0x00401000, 0x80000040, 0x00000000, 0x00001040, 0x80400040, 0x80401000, 0x80001040,
0x80401040, 0x80000000, 0x80400000, 0x00401040, 0x80001000, 0x00400000, 0x00000040, 0x00001000,
0x80400000, 0x80401040, 0x00000000, 0x00401000, 0x00400040, 0x80000000, 0x80001040, 0x00000040,
0x80000040, 0x00001000, 0x80001000, 0x80400040, 0x00001040, 0x80401000, 0x00400000, 0x00401040,
0x00000080, 0x01040000, 0x00040000, 0x20000000, 0x20040080, 0x01000080, 0x21000080, 0x00040080,
0x01000000, 0x20040000, 0x20000080, 0x21040080, 0x21040000, 0x00000000, 0x01040080, 0x21000000,
0x01040080, 0x21000080, 0x00000080, 0x01040000, 0x00040000, 0x20040080, 0x21040000, 0x20000000,
0x20040000, 0x00000000, 0x21040080, 0x01000080, 0x20000080, 0x21000000, 0x01000000, 0x00040080,
0x00040000, 0x00000080, 0x20000000, 0x21000080, 0x01000080, 0x21040000, 0x20040080, 0x01000000,
0x21040080, 0x21000000, 0x01040000, 0x20040000, 0x00040080, 0x20000080, 0x00000000, 0x01040080,
0x21000080, 0x01000000, 0x01040000, 0x20040080, 0x20000000, 0x01040080, 0x00000080, 0x21040000,
0x00040080, 0x21040080, 0x00000000, 0x21000000, 0x01000080, 0x00040000, 0x20040000, 0x20000080,
0x10000008, 0x00002000, 0x10200000, 0x10202008, 0x10002000, 0x00200000, 0x00200008, 0x10000000,
0x00000000, 0x10002008, 0x00202000, 0x00000008, 0x10200008, 0x00202008, 0x00002008, 0x10202000,
0x10200000, 0x10202008, 0x00000008, 0x00200000, 0x00202008, 0x10000008, 0x10002000, 0x00002008,
0x00200008, 0x00002000, 0x10002008, 0x10200008, 0x00000000, 0x10202000, 0x00202000, 0x10000000,
0x10002000, 0x10200008, 0x10202008, 0x00002008, 0x00200000, 0x10000000, 0x10000008, 0x00202000,
0x00202008, 0x00000000, 0x00000008, 0x10200000, 0x00002000, 0x10002008, 0x10202000, 0x00200008,
0x00000008, 0x00202000, 0x00200000, 0x10000008, 0x10002000, 0x00002008, 0x10202008, 0x10200000,
0x10202000, 0x10200008, 0x00002000, 0x00202008, 0x00200008, 0x00000000, 0x10000000, 0x10002008,
0x00100000, 0x02000401, 0x00000400, 0x00100401, 0x02100401, 0x00000000, 0x00000001, 0x02100001,
0x02000400, 0x00100001, 0x02000001, 0x02100400, 0x02100000, 0x00000401, 0x00100400, 0x02000000,
0x02100001, 0x00000000, 0x02000401, 0x02100400, 0x00100000, 0x02000001, 0x02000000, 0x00000401,
0x00100401, 0x02000400, 0x02100000, 0x00100001, 0x00000400, 0x02100401, 0x00000001, 0x00100400,
0x02000000, 0x00100000, 0x02000401, 0x02100001, 0x00100001, 0x02000400, 0x02100400, 0x00100401,
0x00000401, 0x02100401, 0x00100400, 0x00000001, 0x00000000, 0x02100000, 0x02000001, 0x00000400,
0x00100400, 0x02000401, 0x02100001, 0x00000001, 0x02000000, 0x00100000, 0x00000401, 0x02100400,
0x02000001, 0x02100000, 0x00000000, 0x02100401, 0x00100401, 0x00000400, 0x02000400, 0x00100001,
0x08000820, 0x00020000, 0x08000000, 0x00000020, 0x00020020, 0x08020820, 0x08020800, 0x00000800,
0x08020000, 0x08000800, 0x00020800, 0x08020020, 0x00000820, 0x00000000, 0x08000020, 0x00020820,
0x00000800, 0x08020820, 0x08000820, 0x08000000, 0x08020000, 0x00020800, 0x00020820, 0x00000020,
0x08000020, 0x00000820, 0x00020020, 0x08020800, 0x00000000, 0x08020020, 0x08000800, 0x00020000,
0x00020820, 0x08020800, 0x00000020, 0x00000800, 0x08000800, 0x08000020, 0x08020020, 0x00020000,
0x00000000, 0x00020020, 0x08020000, 0x08000820, 0x08020820, 0x00020800, 0x00000820, 0x08000000,
0x00020000, 0x00000800, 0x08020020, 0x00020820, 0x00000020, 0x08020000, 0x08000000, 0x08000820,
0x08020820, 0x08000020, 0x08000800, 0x00000000, 0x00020800, 0x00000820, 0x00020020, 0x08020800,
};

unsigned long long roundkey[16] = {0};

int main(){
	// freopen("in.txt","r",stdin);
	int n, i, j, p, t, cnt;
	unsigned long long k, key, ans, tmp, word, left, right;
	scanf("%d %llx %llx", &n, &word, &key);

	// 密钥生成
	// 删去8位奇偶校验位，K'=[C0,D0]
	for (i = 0, tmp = 0; i < 56; i ++){
		tmp <<= 1;
		tmp |= (key >> (64 - Ksub1[i])) & 1;
	}
	left = tmp >> 28;
	right= tmp & 0xFFFFFFF;
	// 循环左移，生成16轮子密钥
	for (i = 0, ans = 0; i < 16; i ++){
		left  = (left  >> (28 - Kleft[i])) + ((left  & ((1 << (28 - Kleft[i])) -1)) << Kleft[i]);
		right = (right >> (28 - Kleft[i])) + ((right & ((1 << (28 - Kleft[i])) -1)) << Kleft[i]);
		tmp = (left << 28) | right;
		ans = 0;
		for (j = 0; j < 48; j ++){
			ans <<= 1;
			ans |= (tmp >> (56 - Ksub2[j])) & 1;
		}
		roundkey[i] = ans;
	}

	// 加密
	for (p = 0; p < n; p ++){
		// IP
		for (i = 0, cnt = 1, ans = 0; i < 8; i ++, cnt=(cnt+2)%9){
			k = (word>>(7-cnt)) & MOD;
			ans <<= 8;
			ans |= ((k&1)<<7)|((k&0x100)>>2)|((k&0x10000)>>11)|((k&0x1000000)>>20)|((k&0x100000000)>>29)|
				((k&0x10000000000)>>38)|((k&0x1000000000000)>>47)|((k&0x100000000000000)>>56);
		}
		
		// ENCODE
		left = ans >> 32;
		right = ans & 0xFFFFFFFF;
		for (t = 0; t < 15; t ++){
			tmp = left;
			left = right;
			// funF
			k = roundkey[t]^((left&1)<<47)^((left&0xF8000000)<<15)^((left&0x1F800000)<<13)^
					((left&0x1F80000)<<11)^((left&0x1F8000)<<9)^((left&0x1F800)<<7)^
					((left&0x1F80)<<5)^((left&0x1F8)<<3)^((left&0x1F)<<1)^((left&0x80000000)>>31);
			for (i = 7, right = tmp; i >= 0; i --)
				right ^= Sbox[7-i][((((k >> ((6*i)+4)) & 2) | ((k >> (6*i)) & 1)) << 4) + ((k >> (6*i+1)) & 0xF)];
		}
		
		// funF
		k = roundkey[t]^((right&1)<<47)^((right&0xF8000000)<<15)^((right&0x1F800000)<<13)^
				((right&0x1F80000)<<11)^((right&0x1F8000)<<9)^((right&0x1F800)<<7)^
				((right&0x1F80)<<5)^((right&0x1F8)<<3)^((right&0x1F)<<1)^((right&0x80000000)>>31);
		for (i = 7; i >= 0; i --)
			left ^= Sbox[7-i][((((k >> ((6*i)+4)) & 2) | ((k >> (6*i)) & 1)) << 4) + ((k >> (6*i+1)) & 0xF)];
		ans = (left << 32) | right;
		
		// invIP
		for (i = 0, cnt = 0, word = 0; i < 8; i ++, cnt ++){
			k = (ans>>cnt) & MOD;
			word <<= 8;
			word |= ((k&1)<<1)|((k&0x100)>>5)|((k&0x10000)>>11)|((k&0x1000000)>>17)|((k&0x100000000)>>32)|
					((k&0x10000000000)>>38)|((k&0x1000000000000)>>44)|((k&0x100000000000000)>>50);
		}
	}
	printf("0x%016llx", word);
	return 0;
}
